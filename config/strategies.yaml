# Strategy configurations
# Each strategy references a registered strategy type and provides parameters

strategies:
  # Simple Moving Average Crossover
  sma_crossover_btc:
    type: sma_crossover
    params:
      fast_period: 10
      slow_period: 30
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  sma_crossover_eth:
    type: sma_crossover
    params:
      fast_period: 12
      slow_period: 26
    symbols: [ETHUSDT]
    interval: 1h
    enabled: true

  # RSI Mean Reversion
  rsi_mean_reversion:
    type: rsi_mean_reversion
    params:
      period: 14
      oversold: 30
      overbought: 70
    symbols: [BTCUSDT, ETHUSDT]
    interval: 4h
    enabled: true

  # MACD Strategy
  macd_crossover:
    type: macd_crossover
    params:
      fast_period: 12
      slow_period: 26
      signal_period: 9
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # Bollinger Band Breakout
  bollinger_breakout:
    type: bollinger_breakout
    params:
      period: 20
      std_dev: 2.0
    symbols: [BTCUSDT, ETHUSDT]
    interval: 4h
    enabled: true

  # Momentum Breakout
  momentum_breakout:
    type: momentum_breakout
    params:
      lookback: 20
      threshold: 0.02
    symbols: [BTCUSDT, ETHUSDT, SOLUSDT]
    interval: 1d
    enabled: true

  # Machine Learning Classifier
  ml_classifier_btc:
    type: ml_classifier
    params:
      model: gradient_boosting
      features: [sma_20, rsi_14, macd, volume_sma]
      lookback: 100
      train_size: 0.8
    symbols: [BTCUSDT]
    interval: 1d
    enabled: true

  # =============================================================================
  # NEW STRATEGIES - With config-driven risk management and filters
  # =============================================================================

  # SMA Crossover with ADX Filter
  sma_crossover_filtered:
    type: sma_crossover
    params:
      fast_period: 10
      slow_period: 30
      use_adx_filter: true
      adx_threshold: 25
    symbols: [BTCUSDT]
    interval: 1h
    stop_loss_pct: 0.02
    take_profit_pct: 0.04
    enabled: true

  # Volatility Squeeze Strategy
  squeeze_breakout_btc:
    type: volatility_squeeze
    params:
      bb_period: 20
      bb_std: 2.0
      kc_period: 20
      kc_atr_mult: 1.5
      momentum_period: 12
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # VWAP Reversion Strategy
  vwap_reversion_btc:
    type: vwap_reversion
    params:
      vwap_period: 20
      entry_deviation: 0.02
      exit_deviation: 0.005
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # Ensemble Voting Strategy
  ensemble_consensus:
    type: ensemble_voting
    params:
      strategies: [sma_crossover_btc, rsi_mean_reversion, macd_crossover]
      min_agreement: 2
      mode: threshold
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # Regime Adaptive Strategy
  regime_adaptive_btc:
    type: regime_adaptive
    params:
      adx_trending_threshold: 25
      volatility_lookback: 20
      trending_strategy: momentum_breakout
      ranging_strategy: rsi_mean_reversion
      adx_period: 14
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # Enhanced ML Strategy with Walk-Forward
  ml_enhanced_btc:
    type: ml_enhanced
    params:
      model: gradient_boosting
      features: [sma_20, rsi_14, macd, obv, atr_ratio, bb_width, volume_momentum]
      walk_forward: true
      train_window: 500
      test_window: 100
      retrain_frequency: 100
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # Multi-Timeframe Strategy
  mtf_trend_btc:
    type: multi_timeframe
    params:
      base_interval: 1h
      higher_intervals: [4h, 1d]
      signal_strategy: sma_crossover
      require_alignment: true
      fast_period: 10
      slow_period: 30
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # Relative Strength Strategy
  relative_strength_btc:
    type: relative_strength
    params:
      lookback_period: 20
      top_n: 5
      momentum_type: roc
      momentum_threshold: 0.0
      weak_threshold: -0.05
    symbols: [BTCUSDT]
    interval: 1d
    enabled: true

  # Momentum Ranking Strategy
  momentum_ranking_btc:
    type: momentum_ranking
    params:
      lookback_period: 20
      ranking_window: 100
      buy_percentile: 80
      sell_percentile: 20
    symbols: [BTCUSDT]
    interval: 1d
    enabled: true

  # Reinforcement Learning DQN Strategy
  rl_dqn_btc:
    type: rl_dqn
    params:
      algorithm: DQN
      learning_rate: 0.0001
      gamma: 0.99
      buffer_size: 100000
      train_episodes: 100
      features: [sma_20, rsi_14, macd, atr]
      reward_type: returns
    symbols: [BTCUSDT]
    interval: 1h
    enabled: false  # Disabled by default - requires RL dependencies

  # =============================================================================
  # ML CLASSIFIER SIBLINGS - Experimental Improvements
  # =============================================================================

  # ML Classifier V2: Extended features + probability thresholds
  ml_classifier_v2:
    type: ml_classifier_v2
    params:
      model: gradient_boosting
      features: [sma_20, sma_50, ema_12, ema_26, rsi_14, macd, adx, atr_ratio, bb_width, obv, volume_momentum, momentum_10, roc_10]
      lookback: 100
      train_size: 0.8
      prediction_horizon: 1
      buy_threshold: 0.52  # Fixed from 0.6 - was too strict
      sell_threshold: 0.48  # Fixed from 0.4 - was too strict
      use_calibration: true
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # ML Ensemble Voting: Multiple models combined
  ml_ensemble_voting:
    type: ml_ensemble_voting
    params:
      features: [sma_20, ema_12, rsi_14, macd, adx, atr_ratio, bb_width, volume_momentum]
      lookback: 100
      train_size: 0.8
      prediction_horizon: 1
      buy_threshold: 0.55
      sell_threshold: 0.45
      rf_n_estimators: 100
      gb_n_estimators: 100
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # ML Classifier V3: Longer horizon + feature engineering
  ml_classifier_v3:
    type: ml_classifier_v3
    params:
      model: gradient_boosting
      lookback: 100
      train_size: 0.8
      prediction_horizon: 4
      lag_periods: [1, 2, 3, 5]
      rolling_window: 10
      buy_threshold: 0.55
      sell_threshold: 0.45
      min_return_threshold: 0.01
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # ML Classifier XGB: XGBoost with class weights
  ml_classifier_xgb:
    type: ml_classifier_xgb
    params:
      features: [sma_20, ema_12, rsi_14, macd, adx, atr_ratio, bb_width, obv, volume_momentum, roc_10]
      lookback: 100
      train_size: 0.8
      prediction_horizon: 1
      buy_threshold: 0.55
      sell_threshold: 0.45
      n_estimators: 200
      max_depth: 6
      learning_rate: 0.05
      use_class_weights: true
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # ML Classifier V4: Adaptive thresholds based on market regime
  ml_classifier_v4:
    type: ml_classifier_v4
    params:
      features: [sma_20, ema_12, rsi_14, macd, adx, atr_ratio, bb_width, volume_momentum]
      lookback: 100
      train_size: 0.8
      prediction_horizon: 2
      trend_buy_threshold: 0.52
      trend_sell_threshold: 0.48
      range_buy_threshold: 0.65
      range_sell_threshold: 0.35
      adx_trend_threshold: 25
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # ML Classifier Hybrid: Best of XGB + Ensemble + Adaptive
  ml_classifier_hybrid:
    type: ml_classifier_hybrid
    params:
      features: [sma_20, ema_12, rsi_14, macd, adx, atr_ratio, bb_width, obv, volume_momentum, roc_10]
      lookback: 100
      train_size: 0.8
      prediction_horizon: 1
      xgb_weight: 0.6
      rf_weight: 0.4
      trend_buy_threshold: 0.52
      trend_sell_threshold: 0.48
      range_buy_threshold: 0.58
      range_sell_threshold: 0.42
      adx_trend_threshold: 25
      n_estimators: 150
      max_depth: 6
      use_class_weights: true
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true

  # ML Classifier Conservative: Low Drawdown Focus
  ml_classifier_conservative:
    type: ml_classifier_conservative
    params:
      lookback: 100
      train_size: 0.8
      prediction_horizon: 4
      buy_threshold: 0.60
      sell_threshold: 0.50
      min_adx: 25
      n_estimators: 150
    symbols: [BTCUSDT]
    interval: 1h
    enabled: true
